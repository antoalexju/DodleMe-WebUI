<app-navbar></app-navbar>
<div class="wrapper">
    <div class="page-header">
        <div class="page-header-image"></div>
        <div class="content">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 col-md-6 offset-lg-0 offset-md-3">
                        <div class="square square-7" id="square7"></div>
                        <div class="square square-8" id="square8"></div>
                        <div class="card card-register">
                            <div class="card-header">
                                <img alt="Card image" class="card-img" src="assets/img/header1.jpg"/>
                                <h4 class="card-title">Connexion</h4>
                            </div>
                            <div class="card-body">
                                <form class="form" (submit)="onLoginSubmit()" [formGroup]="loginForm">
                                    <div class="input-group" [ngClass]="{ 'input-group-focus': focus === true }">
                                        <div class="input-group-prepend">
                                            <div class="input-group-text">
                                                <i class="tim-icons icon-email-85"> </i>
                                            </div>
                                        </div>
                                        <input class="form-control" placeholder="Email" formControlName="mail" [ngClass]="{ 'is-invalid': submittedLog && g.mail.errors }" type="text" (focus)="focus = true" (blur)="focus = false" />
                                        <div *ngIf="g.mail.errors" class="invalid-feedback" role="alert">Veuillez entrer votre email</div>
                                    </div>
                                    <div class="input-group" [ngClass]="{ 'input-group-focus': focus1 === true }">
                                        <div class="input-group-prepend">
                                            <div class="input-group-text">
                                                <i class="tim-icons icon-lock-circle"> </i>
                                            </div>
                                        </div>
                                        <input class="form-control" placeholder="Password" formControlName="password" [ngClass]="{ 'is-invalid': submittedLog && g.password.errors }" type="password" (focus)="focus1 = true" (blur)="focus1 = false" />
                                        <div *ngIf="g.password.errors" class="invalid-feedback" role="alert">Veuillez entrer votre mot de passe</div>
                                        </div>
                                    <!--
                                    <div class="form-check">
                                        <label class="form-check-label">
                                            <input class="form-check-input" type="checkbox" value="">
                                            Rester connecté
                                            <span class="form-check-sign">
                                                <span class="check"></span>
                                            </span>
                                        </label>
                                    </div>-->
                                </form>
                                <hr>
                                <div class="row">
                                    <div class="col">
                                        <button class="btn btn-miage btn-lg" (click)="onLoginSubmit()">
                                            Se connecter
                                        </button>
                                    </div>
                                    <div class="col">
                                        <button class="btn btn-miage btn-simple btn-lg" (click)="myModal.show()">
                                            Rester Anonyme
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer">
                                <a class="btn btn-miage btn-simple" [routerLink]="['/register']">
                                    Pas encore inscrit(e) ?
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div aria-hidden="true" aria-labelledby="myModalLabel" bsModal class="modal fade modal-black" #myModal="bs-modal" id="myModal" role="dialog" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header justify-content-center">
                                <div class="text-muted text-center ml-auto mr-auto">
                                    <h3 class="mb-0">Entrez votre pseudo</h3>
                                </div>
                            </div>
                            <div class="modal-body">
                                <form role="form" (ngSubmit)="onUsernameSubmit()" [formGroup]="userForm" >
                                    <div class="form-group mb-3">
                                        <h6></h6>
                                        <div class="input-group input-group-alternative" [ngClass]="{ 'input-group-focus': focus3 === true }">
                                            <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="tim-icons icon-single-02"> </i>
                                    </span>
                                            </div>
                                            <input class="form-control" formControlName="username" type="test" [ngClass]="{ 'is-invalid': submittedAnon && f.username.errors }" (focus)="focus3 = true" (blur)="focus3 = false"/>
                                            <div *ngIf="f.username.errors" class="invalid-feedback" role="alert">Vous devez choisir un pseudo</div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <div class="text-center">
                                                <button class="btn btn-miage my-4" type="button" (click)="onUsernameSubmit()">
                                                    Confirmer
                                                    <!--#TODO Lier ici les données proposées par l'utilisateur avec la bdd (horaires) -->
                                                </button>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="text-center">
                                                <button class="btn btn-miage my-4" type="button" (click)="myModal.hide();">
                                                    Annuler
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="login-bg"></div>
                <app-scuares></app-scuares>
            </div>
        </div>
    </div>
    <app-footer></app-footer>
</div>

